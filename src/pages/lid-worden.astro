---
import Default from "../layouts/Default.astro";
import Hero from "../components/Hero.astro";
---
<Default title="lid-worden | Mellowbikers">
  
  <main>
    <!-- Hero Section -->
    <section class="relative w-full min-h-[90vh] bg-[#0d0f19] bg-cover bg-center bg-fixed flex items-end pb-20 px-4" style="background-image: url('/assets/uploads/mb-hero-lidworden-small-2048_3ap7pw77.jpg'); background-position: 52% 68%;">
      <!-- Mountains separator at bottom - Layer 1 (full color) -->
      <div class="absolute -bottom-1 left-0 right-0 h-24 bg-mellow-red" style="clip-path: polygon(0 100%, 0 60%, 10% 70%, 20% 50%, 30% 60%, 40% 40%, 50% 55%, 60% 35%, 70% 50%, 80% 40%, 90% 55%, 100% 45%, 100% 100%);"></div>
      
      <!-- Mountains separator at bottom - Layer 2 (50% transparent, offset pattern) -->
      <div class="absolute bottom-0 left-0 right-0 h-24 bg-mellow-red/50" style="clip-path: polygon(0 100%, 0 50%, 10% 60%, 20% 40%, 30% 55%, 40% 30%, 50% 45%, 60% 25%, 70% 40%, 80% 30%, 90% 50%, 100% 35%, 100% 100%);"></div>
      <div class="w-full text-center">
        <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-[#f1ffff] mb-8" style="text-shadow: 10px 10px 30px rgba(0,0,0,0.2); line-height: 1; letter-spacing: -0.05em;">
          Lid worden van de Mellowbikers
        </h2>
        <div class="text-[#f1ffff] text-4xl">
          <svg class="w-8 h-8 mx-auto hover:text-[#2affcc] transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
          </svg>
        </div>
      </div>
    </section>
    <!-- Content Section -->
    <section class="relative w-full bg-[#d90b1e] py-12 md:py-20 px-4">
      <!-- Mountains separator at top - Layer 1 (full color) -->
      <div class="absolute -top-1 left-0 right-0 h-24 bg-[#d90b1e]" style="clip-path: polygon(0 0, 0 40%, 10% 50%, 20% 30%, 30% 40%, 40% 20%, 50% 35%, 60% 15%, 70% 30%, 80% 20%, 90% 35%, 100% 25%, 100% 0);"></div>
      
      <!-- Mountains separator at top - Layer 2 (50% transparent, offset pattern) -->
      <div class="absolute top-0 left-0 right-0 h-28 bg-[#d90b1e]/50" style="clip-path: polygon(0 0, 0 50%, 10% 60%, 20% 40%, 30% 55%, 40% 30%, 50% 45%, 60% 25%, 70% 40%, 80% 30%, 90% 50%, 100% 35%, 100% 0);"></div>
      
      <div class="relative z-10 max-w-4xl mx-auto">
        <div class="bg-[#0d0f19] rounded-lg p-6 md:p-12">
          <h4 class="text-lg md:text-xl text-[#2affcc] font-bold mb-6">
            Schrijf je in. Word lid. Rij mee.
          </h4>
          
          <p class="text-base text-[#f1ffff] mb-8 leading-relaxed">
            Dat kan natuurlijk, hoe meer Mellows hoe meer plezier! Je kunt ook altijd een keer met ons meerijden. Zo kun je ons een beetje leren kennen. En wij jou natuurlijk. Maar uiteindelijk past iedereen bij de Mellowbikers, zo lang je maar van zo'n fiets met dikke banden houdt.
            <br/><br/>
            Vul het formulier op deze pagina in, verstuur het en we nemen snel contact met je op.
          </p>

          <!-- Lid Worden Form -->
          <form id="lid-worden-form" class="space-y-6 mb-6">
            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label for="firstName" class="block text-[#f1ffff] text-sm mb-1">Voornaam *</label>
                <input 
                  type="text" 
                  id="firstName" 
                  name="firstName" 
                  required
                  class="w-full px-4 py-2 rounded bg-[#1a1d2e] text-[#f1ffff] border border-[#2affcc] focus:outline-none focus:border-[#1fe6b8]"
                />
              </div>
              
              <div>
                <label for="lastName" class="block text-[#f1ffff] text-sm mb-1">Achternaam *</label>
                <input 
                  type="text" 
                  id="lastName" 
                  name="lastName" 
                  required
                  class="w-full px-4 py-2 rounded bg-[#1a1d2e] text-[#f1ffff] border border-[#2affcc] focus:outline-none focus:border-[#1fe6b8]"
                />
              </div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label for="email" class="block text-[#f1ffff] text-sm mb-1">Email *</label>
                <input 
                  type="email" 
                  id="email" 
                  name="email" 
                  required
                  class="w-full px-4 py-2 rounded bg-[#1a1d2e] text-[#f1ffff] border border-[#2affcc] focus:outline-none focus:border-[#1fe6b8]"
                />
              </div>
              
              <div>
                <label for="phone" class="block text-[#f1ffff] text-sm mb-1">Telefoon *</label>
                <input 
                  type="tel" 
                  id="phone" 
                  name="phone" 
                  required
                  class="w-full px-4 py-2 rounded bg-[#1a1d2e] text-[#f1ffff] border border-[#2affcc] focus:outline-none focus:border-[#1fe6b8]"
                />
              </div>
            </div>
            
            <div>
              <label for="address" class="block text-[#f1ffff] text-sm mb-1">Adres *</label>
              <input 
                type="text" 
                id="address" 
                name="address" 
                required
                class="w-full px-4 py-2 rounded bg-[#1a1d2e] text-[#f1ffff] border border-[#2affcc] focus:outline-none focus:border-[#1fe6b8]"
              />
            </div>
            
            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label for="zipCode" class="block text-[#f1ffff] text-sm mb-1">Postcode *</label>
                <input 
                  type="text" 
                  id="zipCode" 
                  name="zipCode" 
                  required
                  class="w-full px-4 py-2 rounded bg-[#1a1d2e] text-[#f1ffff] border border-[#2affcc] focus:outline-none focus:border-[#1fe6b8]"
                />
              </div>
              
              <div>
                <label for="city" class="block text-[#f1ffff] text-sm mb-1">Plaats *</label>
                <input 
                  type="text" 
                  id="city" 
                  name="city" 
                  required
                  class="w-full px-4 py-2 rounded bg-[#1a1d2e] text-[#f1ffff] border border-[#2affcc] focus:outline-none focus:border-[#1fe6b8]"
                />
              </div>
            </div>
            
            <div>
              <label for="birthDate" class="block text-[#f1ffff] text-sm mb-1">Geboortedatum *</label>
              <input 
                type="date" 
                id="birthDate" 
                name="birthDate" 
                required
                class="w-full px-4 py-2 rounded bg-[#1a1d2e] text-[#f1ffff] border border-[#2affcc] focus:outline-none focus:border-[#1fe6b8]"
              />
            </div>
            
            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label for="emergencyContact" class="block text-[#f1ffff] text-sm mb-1">Noodcontact naam</label>
                <input 
                  type="text" 
                  id="emergencyContact" 
                  name="emergencyContact"
                  class="w-full px-4 py-2 rounded bg-[#1a1d2e] text-[#f1ffff] border border-[#2affcc] focus:outline-none focus:border-[#1fe6b8]"
                />
              </div>
              
              <div>
                <label for="emergencyPhone" class="block text-[#f1ffff] text-sm mb-1">Noodcontact telefoon</label>
                <input 
                  type="tel" 
                  id="emergencyPhone" 
                  name="emergencyPhone"
                  class="w-full px-4 py-2 rounded bg-[#1a1d2e] text-[#f1ffff] border border-[#2affcc] focus:outline-none focus:border-[#1fe6b8]"
                />
              </div>
            </div>
            
            <div>
              <label for="experience" class="block text-[#f1ffff] text-sm mb-1">Mountainbike ervaring (optioneel)</label>
              <textarea 
                id="experience" 
                name="experience" 
                rows="3"
                placeholder="Vertel ons kort over je mountainbike ervaring..."
                class="w-full px-4 py-2 rounded bg-[#1a1d2e] text-[#f1ffff] border border-[#2affcc] focus:outline-none focus:border-[#1fe6b8] resize-none"
              ></textarea>
            </div>
            
            <div class="cf-turnstile" data-sitekey="0x4AAAAAACAWjYvDp07zRShL"></div>
            
            <div id="lid-worden-message" class="hidden text-sm"></div>
            
            <button 
              type="submit" 
              class="w-full px-6 py-3 rounded-lg bg-[#004fff] hover:bg-[#003acc] text-[#f1ffff] font-medium transition-colors border-2 border-[#004fff] hover:border-[#85afff] disabled:opacity-50 disabled:cursor-not-allowed"
            >
              Inschrijving versturen
            </button>
          </form>

          <p class="text-sm text-[#f1ffff]">
            Dit formulier liever downloaden, uitprinten, invullen en aan onze secretaris geven? Niet heel milieuvriendelijk maar het kan ook, <a href="https://f002.backblazeb2.com/file/Mellowbikers/Inschrijfformulier+2022.pdf" target="_blank" rel="noreferrer noopener" class="underline text-[#2affcc] hover:text-[#1fe6b8]">klik hier om het bestand te downloaden</a>.
          </p>
        </div>
      </div>
      </div>
    </section>

    <!-- Bottom Hero Section -->
    <section class="relative w-full min-h-[50vh] bg-[#0d0f19] bg-cover bg-center bg-fixed flex items-end justify-center px-4 pb-8" style="background-image: url('/assets/uploads/mb-scroll-liworden-2048_msnwbg7m.jpg'); background-position: 44% 65%;">
      <!-- Mountains separator at top - Layer 1 (full color) -->
      <div class="absolute -top-1 left-0 right-0 h-24 bg-[#0d0f19]" style="clip-path: polygon(0 0, 0 40%, 10% 50%, 20% 30%, 30% 40%, 40% 20%, 50% 35%, 60% 15%, 70% 30%, 80% 20%, 90% 35%, 100% 25%, 100% 0);"></div>
      
      <!-- Mountains separator at top - Layer 2 (50% transparent, offset pattern) -->
      <div class="absolute top-0 left-0 right-0 h-28 bg-[#0d0f19]/50" style="clip-path: polygon(0 0, 0 50%, 10% 60%, 20% 40%, 30% 55%, 40% 30%, 50% 45%, 60% 25%, 70% 40%, 80% 30%, 90% 50%, 100% 35%, 100% 0);"></div>
      
      <div class="relative z-10 text-center text-sm text-[#f1ffff]/70">
        <p class="text-shadow-lg">
          Â© {new Date().getFullYear()} Mellowbikers | 
          <a href="/" class="hover:text-[#2affcc] transition-colors">Home</a> | 
          <a href="/agenda" class="hover:text-[#2affcc] transition-colors">Agenda</a> | 
          <a href="/mellow-in-the-spotlight" class="hover:text-[#2affcc] transition-colors">Spotlight</a> | 
          <a href="/mellow-brewery" class="hover:text-[#2affcc] transition-colors">Bier</a> | 
          <a href="/lid-worden" class="hover:text-[#2affcc] transition-colors">Lid worden</a>
        </p>
      </div>
    </section>

  </main>
</Default>

<script>
  // Lid worden form handler
  const lidWordenForm = document.getElementById('lid-worden-form') as HTMLFormElement;
  const lidWordenMessage = document.getElementById('lid-worden-message') as HTMLDivElement;

  if (lidWordenForm) {
    lidWordenForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const submitButton = lidWordenForm.querySelector('button[type="submit"]') as HTMLButtonElement;
      submitButton.disabled = true;
      submitButton.textContent = 'Versturen...';
      
      try {
        const formData = new FormData(lidWordenForm);
        const response = await fetch('/api/lid-worden', {
          method: 'POST',
          body: formData,
        });
        
        const result = await response.json();
        
        if (response.ok) {
          lidWordenMessage.textContent = result.message;
          lidWordenMessage.className = 'text-[#2affcc] text-sm bg-[#2affcc]/10 p-3 rounded';
          lidWordenMessage.classList.remove('hidden');
          lidWordenForm.reset();
          
          // Reset turnstile
          if (window.turnstile) {
            window.turnstile.reset();
          }
          
          // Scroll naar bericht
          lidWordenMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
        } else {
          lidWordenMessage.textContent = result.error || 'Er ging iets mis. Probeer het later opnieuw.';
          lidWordenMessage.className = 'text-[#d90b1e] text-sm bg-[#d90b1e]/10 p-3 rounded border border-[#d90b1e]';
          lidWordenMessage.classList.remove('hidden');
        }
      } catch (error) {
        lidWordenMessage.textContent = 'Er ging iets mis. Probeer het later opnieuw.';
        lidWordenMessage.className = 'text-[#d90b1e] text-sm bg-[#d90b1e]/10 p-3 rounded border border-[#d90b1e]';
        lidWordenMessage.classList.remove('hidden');
      } finally {
        submitButton.disabled = false;
        submitButton.textContent = 'Inschrijving versturen';
      }
    });
  }
</script>
